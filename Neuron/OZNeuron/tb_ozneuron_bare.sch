v {xschem version=3.4.5 file_version=1.2
}
G {}
K {}
V {}
S {}
E {}
B 2 70 -650 560 -370 {flags=graph
y1=0.66
y2=0.67
ypos1=0
ypos2=2
divy=5
subdivy=1
unity=1
x1=0
x2=1e-05
divx=5
subdivx=1
xlabmag=1.0
ylabmag=1.0


dataset=-1
unitx=1
logx=0
logy=0
color=4
node=vout}
B 2 600 -520 1070 -290 {flags=graph
y1=-1.9e-06
y2=4.5e-06
ypos1=0
ypos2=2
divy=5
subdivy=1
unity=1
x1=0
x2=1e-05
divx=5
subdivx=1
xlabmag=1.0
ylabmag=1.0


dataset=-1
unitx=1
logx=0
logy=0
color="4 7"
node="i(vilk)
i(visyn)"}
N -190 -50 -70 -50 {
lab=vm}
N -70 120 -70 250 {
lab=GND}
N -70 -50 50 -50 {
lab=vm}
N -70 -50 -70 0 {
lab=vm}
N -190 -50 -190 0 {
lab=vm}
N 50 -50 50 50 {
lab=vm}
N 50 -220 50 -160 {
lab=VDD}
N 200 -50 200 0 {
lab=va}
N 50 -130 50 -50 {
lab=vm}
N 50 140 50 250 {
lab=GND}
N 160 -50 160 30 {
lab=vm}
N 50 -50 160 -50 {
lab=vm}
N 200 90 200 250 {
lab=GND}
N 300 -50 300 30 {
lab=va}
N 340 -50 340 0 {
lab=vout}
N 260 -50 300 -50 {
lab=va}
N 340 190 340 250 {
lab=GND}
N 340 60 340 100 {
lab=#net1}
N 340 30 410 30 {
lab=GND}
N 450 -50 490 -50 {
lab=vout}
N 490 -50 490 -0 {
lab=vout}
N 490 120 490 250 {
lab=GND}
N 450 -50 450 80 {
lab=vout}
N 90 80 450 80 {
lab=vout}
N 90 -160 260 -160 {
lab=va}
N 260 -160 260 -50 {
lab=va}
N 410 250 490 250 {
lab=GND}
N 410 90 410 250 {
lab=GND}
N 340 -220 340 -100 {
lab=VDD}
N 200 -220 200 -100 {
lab=VDD}
N 490 -50 650 -50 {
lab=vout}
N 200 -220 340 -220 {
lab=VDD}
N -330 30 -330 100 {
lab=#net2}
N -330 30 -230 30 {
lab=#net2}
N -330 250 -190 250 {
lab=GND}
N -620 220 -620 250 {
lab=GND}
N -400 220 -400 250 {
lab=GND}
N -330 220 -330 250 {
lab=GND}
N -620 140 -620 160 {
lab=VDD}
N 260 130 260 140 {
lab=#net3}
N 260 130 300 130 {
lab=#net3}
N 160 -100 160 -50 {
lab=vm}
N 200 -70 200 -50 {
lab=va}
N 300 -100 300 -50 {
lab=va}
N 340 -70 340 -50 {
lab=vout}
N 340 -50 450 -50 {
lab=vout}
N 200 -50 260 -50 {
lab=va}
N -190 250 -70 250 {
lab=GND}
N -70 250 50 250 {
lab=GND}
N 50 250 200 250 {
lab=GND}
N 200 250 340 250 {
lab=GND}
N 340 250 410 250 {
lab=GND}
N 50 -220 200 -220 {
lab=VDD}
N -620 250 -510 250 {
lab=GND}
N -400 250 -330 250 {
lab=GND}
N 50 -250 50 -220 {
lab=VDD}
N -40 250 -40 270 {
lab=GND}
N -190 -290 -190 -280 {
lab=VDD}
N -190 -220 -190 -200 {
lab=#net4}
N -190 -170 -180 -170 {
lab=VDD}
N -180 -250 -180 -170 {
lab=VDD}
N -190 -250 -180 -250 {
lab=VDD}
N -180 -280 -180 -250 {
lab=VDD}
N -190 -280 -180 -280 {
lab=VDD}
N -190 -140 -190 -110 {
lab=#net5}
N -400 -170 -400 100 {
lab=vw}
N -400 -170 -230 -170 {
lab=vw}
N -470 220 -470 250 {
lab=GND}
N -470 -250 -470 100 {
lab=Vin}
N -450 -250 -230 -250 {
lab=Vin}
N -420 250 -400 250 {
lab=GND}
N -470 -250 -450 -250 {
lab=Vin}
N -190 60 -190 90 {
lab=#net6}
N -190 210 -190 250 {
lab=GND}
N -160 90 -160 250 {
lab=GND}
N 260 200 260 250 {
lab=GND}
N 340 160 340 190 {
lab=GND}
N 340 130 340 160 {
lab=GND}
N 410 30 410 90 {
lab=GND}
N 490 60 490 120 {
lab=GND}
N -70 60 -70 120 {
lab=GND}
N 50 110 50 140 {
lab=GND}
N 50 80 50 110 {
lab=GND}
N 200 60 200 90 {
lab=GND}
N 200 30 200 60 {
lab=GND}
N -190 30 -160 30 {
lab=GND}
N -160 30 -160 100 {
lab=GND}
N -190 150 -190 210 {
lab=GND}
N -330 160 -330 220 {
lab=GND}
N -400 160 -400 220 {
lab=GND}
N -470 160 -470 220 {
lab=GND}
N -510 250 -420 250 {
lab=GND}
C {sky130_fd_pr/pfet_01v8.sym} 70 -160 0 1 {name=Mna
L=0.15
W=2
nf=1 mult=1
model=pfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8.sym} -210 30 0 0 {name=Mlk
L=0.15
W=1  
nf=1 mult=1
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/pfet_01v8.sym} 180 -100 0 0 {name=Minv1
L=0.15
W=2
nf=1 mult=1
model=pfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/pfet_01v8.sym} 320 -100 0 0 {name=Minv2
L=0.15
W=2
nf=1 mult=1
model=pfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8.sym} 70 80 0 1 {name=Mref
L=0.15
W=1  
nf=1 mult=1
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8.sym} 180 30 0 0 {name=Minv3
L=0.15
W=1  
nf=1 mult=1
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8.sym} 320 30 0 0 {name=Minv4
L=0.15
W=1  
nf=1 mult=1
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8.sym} 320 130 0 0 {name=Mref2
L=0.15
W=1  
nf=1 mult=1
model=nfet_01v8
spiceprefix=X
}
C {devices/capa.sym} -70 30 0 0 {name=Cmem
m=1
value=0.1p
footprint=1206
device="ceramic capacitor"}
C {devices/capa.sym} 490 30 0 0 {name=Ck
m=1
value=0.1p
footprint=1206
device="ceramic capacitor"
spice_ignore=false}
C {devices/lab_pin.sym} 260 -50 3 0 {name=p6 sig_type=std_logic lab=va}
C {sky130_fd_pr/corner.sym} -510 -580 0 0 {name=CORNER only_toplevel=true corner=tt}
C {devices/code_shown.sym} -380 -630 0 0 {name=s1 only_toplevel=false value="


.tran 100n 10u
.control
	save all
	run
	write tb_ozneuron_bare.raw
.endc
"
spice_ignore=true}
C {devices/vsource.sym} -330 130 0 0 {name=Vlk value=0.6 savecurrent=false}
C {devices/vsource.sym} 260 170 0 0 {name=Vref value=0.7 savecurrent=false}
C {devices/vsource.sym} -620 190 0 0 {name=V3 value=1.8 savecurrent=false}
C {devices/vdd.sym} -620 140 0 0 {name=l1 lab=VDD}
C {devices/vdd.sym} 50 -250 0 0 {name=l2 lab=VDD}
C {devices/launcher.sym} -400 -400 0 0 {name=h5
descr="load waves" 
tclcommand="xschem raw_read $netlist_dir/tb_ozneuron_bare.raw tran"
}
C {devices/gnd.sym} -40 270 0 0 {name=l5 lab=GND}
C {sky130_fd_pr/pfet_01v8.sym} -210 -170 0 0 {name=Mna1
L=0.15
W=2
nf=1 mult=1
model=pfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/pfet_01v8.sym} -210 -250 0 0 {name=Mna2
L=0.15
W=2
nf=1 mult=1
model=pfet_01v8
spiceprefix=X
}
C {devices/vdd.sym} -190 -290 0 0 {name=l6 lab=VDD}
C {devices/vsource.sym} -190 -80 0 0 {name=Visyn value=0 savecurrent=true}
C {devices/vsource.sym} -400 130 0 0 {name=Vw value=1.2 savecurrent=false}
C {devices/vsource.sym} -470 130 0 0 {name=Vin value=1 savecurrent=false}
C {devices/vsource.sym} -190 120 0 0 {name=Vilk value=0 savecurrent=true}
C {devices/lab_pin.sym} -400 -120 0 1 {name=p1 sig_type=std_logic lab=vw}
C {devices/lab_pin.sym} -470 -220 0 0 {name=p2 sig_type=std_logic lab=Vin}
C {devices/lab_pin.sym} -60 -50 3 1 {name=p3 sig_type=std_logic lab=vm}
C {devices/code_shown.sym} 800 -180 0 0 {name=s2 only_toplevel=false value="

.nodeset v(vm)=1
.tran 5n 10u
.control
	save all
	*set wr_singlescale
	set wr_vecnames
	option numdgt = 4
	compose Vlk_list start=0 stop=1.8 step=0.1
	compose Vin_list start=0 stop=1.8 step=0.09
    foreach vlk $&Vlk_list 
        alter Vlk $vlk
        set namestr = 'tc_\{$vlk\}.txt'
        set writestr = ' '
        foreach vin $&Vin_list
            alter Vin $vin
            run
            set writestr = ( $writestr \{$curplot\}.v(vout) )  
        end
	wrdata /home/alex/Desktop/EDA/SNN_IPN/Neuron/OZNeuron/sims/\{$namestr\} $writestr
    end
.endc
"
spice_ignore=false}
C {devices/lab_pin.sym} 600 -50 3 1 {name=p4 sig_type=std_logic lab=vout}
